cluster_extension_metadata = {
  '_dbscan_inner':
<<<<<<< HEAD
    {'sources': [cython_gen_cpp.process('_dbscan_inner.pyx')]},
  '_hierarchical_fast':
    {'sources': [cython_gen_cpp.process('_hierarchical_fast.pyx'), metrics_cython_tree]},
  '_k_means_common':
    {'sources': [cython_gen.process('_k_means_common.pyx')], 'dependencies': [openmp_dep]},
  '_k_means_lloyd':
    {'sources': [cython_gen.process('_k_means_lloyd.pyx')], 'dependencies': [openmp_dep]},
  '_k_means_elkan':
    {'sources': [cython_gen.process('_k_means_elkan.pyx')], 'dependencies': [openmp_dep]},
  '_k_means_minibatch':
    {'sources': [cython_gen.process('_k_means_minibatch.pyx')], 'dependencies': [openmp_dep]},
=======
    {'sources': ['_dbscan_inner.pyx'], 'override_options': ['cython_language=cpp']},
  '_hierarchical_fast':
    {'sources': ['_hierarchical_fast.pyx', metrics_cython_tree],
     'override_options': ['cython_language=cpp']},
  '_k_means_common':
    {'sources': ['_k_means_common.pyx'], 'dependencies': [openmp_dep]},
  '_k_means_lloyd':
    {'sources': ['_k_means_lloyd.pyx'], 'dependencies': [openmp_dep]},
  '_k_means_elkan':
    {'sources': ['_k_means_elkan.pyx'], 'dependencies': [openmp_dep]},
  '_k_means_minibatch':
    {'sources': ['_k_means_minibatch.pyx'], 'dependencies': [openmp_dep]},
>>>>>>> 9c5f2989031ba54019bec835b7ecb3f5768f2dcf
}

foreach ext_name, ext_dict : cluster_extension_metadata
  py.extension_module(
    ext_name,
    [ext_dict.get('sources'), utils_cython_tree],
    dependencies: [np_dep] + ext_dict.get('dependencies', []),
<<<<<<< HEAD
=======
    override_options : ext_dict.get('override_options', []),
    cython_args: cython_args,
>>>>>>> 9c5f2989031ba54019bec835b7ecb3f5768f2dcf
    subdir: 'sklearn/cluster',
    install: true
  )
endforeach

subdir('_hdbscan')
